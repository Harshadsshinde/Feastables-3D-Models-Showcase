!function e(){console.log("MIGHTY PO BOX BLOCKER LOADED");let t=e=>{let t=document.createElement("div");t.setAttribute("id","po-box-modal-container"),t.innerHTML=`<div id='po-box-modal'>${e}</div>`,document.body.appendChild(t)};(()=>{let e="#po-box-modal-container { position: fixed; z-index: 99999999; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5); } #po-box-modal { z-index: 99999999; background-color: #fefefe; margin: 15% auto; margin-top: 200px; padding: 20px; border: 1px solid #888; border-radius: 10px; width: 60%; max-width: 500px; font-size:25px; font-weight: bold; color: black; box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19); text-align: center; }",t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(t)})();let o=(Shopify.shop||Shopify.Checkout.apiHost).replace(".myshopify.com",""),a="address_validator_"+o,n=e=>localStorage.setItem(a,JSON.stringify({value:e,expiry:new Date().getTime()+3e5})),r=()=>{let e=localStorage.getItem(a);if(!e)return null;let t=JSON.parse(e),o=new Date;return o.getTime()>t.expiry?(localStorage.removeItem(a),null):t.value},i=e=>{if(e.features_cart_notice&&(document.addEventListener("click",o=>{let a=e=>{let t="INPUT"===e.nodeName,o="BUTTON"===e.nodeName,a="checkout"===e.name,n="cart-sidebar-checkout"===e.id,r=e.classList&&e.classList.contains("button-checkout"),i=e.classList&&e.classList.contains("shopify-payment-button__button");return{isInputCheckout:t&&a,isButtonCheckout:o&&(a||n||r),isButtonPayment:o&&i}},n=[];n.push(a(o.target)),o.path&&o.path.length&&o.path.forEach(e=>{n.push(a(e))});let r=n.some(({isInputCheckout:e,isButtonCheckout:t,isButtonPayment:o})=>e||t||o);r&&("brodough.ca"===window.location.hostname||"brodough.ca"===window.location.host||(t(e.text_cart_notice||"We do not ship to PO Box Addresses"),setTimeout(()=>document.getElementById("po-box-modal-container").style.display="none",3e3)))},!0),("brodough.ca"===window.location.hostname||"brodough.ca"===window.location.host)&&"/cart"===window.location.pathname)){let o=document.querySelector("header.section-header h1.text-center"),a=document.querySelector("#po-warning");a||o.insertAdjacentHTML("afterend",`<p id="po-warning" class="rte">${e.text_cart_notice||"We do not ship to PO Box Addresses"}</p>`)}};r()&&i(r());let s=((e,t,o=null)=>{let a=new XMLHttpRequest;return a.open("GET",t,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.send(o?JSON.stringify(o):null),a})("GET",`https://poboxblocker.herokuapp.com/api/get_preferences?shop=${Shopify.shop}`);s.onreadystatechange=()=>{if(4===s.readyState){let e=JSON.parse(s.responseText);n(e),i(e)}}}();